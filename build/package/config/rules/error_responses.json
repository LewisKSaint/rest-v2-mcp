{
  "name": "error_responses",
  "description": "Validates that API error responses follow Solace REST API conventions as per ADR",
  "enabled": true,
  "conditions": [
    {
      "type": "error_response_structure",
      "fields": ["message", "errorId", "meta", "validationDetails"],
      "message": "Errors must include a message, error ID, meta, and validation details"
    },
    {
      "type": "error_message_format",
      "message": "The message must be a user-friendly message detailing what went wrong"
    },
    {
      "type": "error_id_format",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
      "message": "The errorId must be a UUID that was also logged with an appropriate stack trace or WARN or ERROR log"
    },
    {
      "type": "validation_details_format",
      "message": "The validationDetails must describe what the issue was with the fields"
    },
    {
      "type": "field_name_match",
      "message": "The field name must match the field name being set in the request payload"
    },
    {
      "type": "nested_object_validation",
      "message": "If the field is an object, the validationDetails can include an object with fields nested within"
    },
    {
      "type": "array_index_format",
      "pattern": "^.*\\[[0-9]+\\]$",
      "message": "If the field is an array, the array index must be indicated with square brackets beside the field name"
    },
    {
      "type": "single_response_validation",
      "message": "All validation errors should be returned in a single response"
    }
  ]
}
